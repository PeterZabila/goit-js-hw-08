{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,SAEMC,EAAc,sBACdC,EAAW,GAEXC,EAAO,CACTC,KAAMC,SAASC,cAAc,kBAC7BC,MAAOF,SAASC,cAAc,SAC9BE,SAAUH,SAASC,cAAc,aA+BrCG,OAAOC,iBAAiB,QAbF,WAClB,GAAGC,aAAaC,QAAQX,GAAc,CAClC,IAAMY,EAAmBF,aAAaC,QAAQX,GACxCa,EAAwBC,KAAKC,MAAMH,GACzCV,EAAKI,MAAMU,MAAQH,EAAsBI,MACzCf,EAAKK,SAASS,MAAQH,EAAsBK,aAE5ChB,EAAKI,MAAMU,MAAQ,GACnBd,EAAKK,SAASS,MAAQ,MAM9Bd,EAAKC,KAAKM,iBAAiB,QAASU,EAAArB,EAAA,EA7BZ,WACpBG,EAASgB,MAAQf,EAAKI,MAAMU,MAC5Bf,EAASiB,QAAUhB,EAAKK,SAASS,MAC7B,IAAMI,EAAgBN,KAAKO,UAAUpB,GACzCS,aAAaY,QAAQtB,EAAaoB,KAyBwB,MAC9DlB,EAAKC,KAAKM,iBAAiB,UAtBF,SAASc,GAC9BA,EAAEC,iBACED,EAAEE,cAAcC,SAAST,MAAMD,MAAQ,GACvCO,EAAEE,cAAcC,SAASR,QAAQF,MAAQ,GAC7CN,aAAaiB,WAAW3B","sources":["src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash.throttle';\n\nconst STORAGE_KEY = 'feedback-form-state';\nconst formData = {};\n\nconst refs = {\n    form: document.querySelector('.feedback-form'),\n    input: document.querySelector('input'),\n    textArea: document.querySelector('textarea'),\n};\n\nconst formInputHandle = function() {\n    formData.email = refs.input.value;\n    formData.message = refs.textArea.value;\n        const formDataForLS = JSON.stringify(formData);\n    localStorage.setItem(STORAGE_KEY, formDataForLS);\n    // console.log(formData); \n};\n\nconst formSubmitHandle = function(e) {\n    e.preventDefault();\n        e.currentTarget.elements.email.value = \"\";\n        e.currentTarget.elements.message.value = \"\";\n    localStorage.removeItem(STORAGE_KEY);\n};\n\nconst getSavedValue = function() {\n    if(localStorage.getItem(STORAGE_KEY)) {\n        const currentLocalData = localStorage.getItem(STORAGE_KEY);\n        const currentLocalDataParse = JSON.parse(currentLocalData);\n        refs.input.value = currentLocalDataParse.email;\n        refs.textArea.value = currentLocalDataParse.message;\n    } else {\n        refs.input.value = \"\";\n        refs.textArea.value = \"\";\n    }\n}; \n\n\nwindow.addEventListener('load', getSavedValue);\nrefs.form.addEventListener('input', throttle(formInputHandle, 500));\nrefs.form.addEventListener('submit', formSubmitHandle);\n\n\n// // VARIANT 1\n\n// import throttle from 'lodash.throttle';\n\n// const STORAGE_KEY = 'feedback-form-state';\n// const formData = {};\n\n// const refs = {\n//     form: document.querySelector('.feedback-form'),\n//     input: document.querySelector('input'),\n//     textArea: document.querySelector('textarea'),\n// };\n\n// function formSubmitHandle(e) {\n//     e.preventDefault();\n//         e.currentTarget.elements.email.value = \"\";\n//         e.currentTarget.elements.message.value = \"\";\n//     localStorage.removeItem(STORAGE_KEY);\n// };\n\n// function anyInputHandler(e) {\n//     if(e.target.tagName === \"INPUT\" || e.target.tagName === \"TEXTAREA\"){\n//         formData[e.target.name] = e.target.value;\n//             const formDataforForLS = JSON.stringify(formData);\n//         localStorage.setItem(STORAGE_KEY, formDataforForLS);\n//     }\n// };\n\n// function onRefreshHandle() {\n//     const objFromLS = JSON.parse(localStorage.getItem(STORAGE_KEY));\n//         Object.keys(objFromLS).map(name => {\n//            const elFromDom = refs.form.querySelector(`[name=${name}]`);\n//            elFromDom.value = objFromLS[name];\n//         })\n// }\n\n// refs.form.addEventListener('submit', formSubmitHandle);\n// addEventListener('load', onRefreshHandle)\n// refs.form.addEventListener('input', throttle(anyInputHandler, 500));\n\n\n\n// const onRefresh = function(e) {\n//     if(localStorage.getItem(STORAGE_KEY)) {\n//         const rawData = localStorage.getItem(STORAGE_KEY);\n//         const parsedJson = JSON.parse(rawData);\n\n//         refs.input.value = parsedJson.email;\n//         refs.textArea.value = parsedJson.message;\n//     }\n// };\n\n// refs.form.addEventListener('input', onRefresh);"],"names":["$dCfNN","parcelRequire","$b00c40859be242c5$var$STORAGE_KEY","$b00c40859be242c5$var$formData","$b00c40859be242c5$var$refs","form","document","querySelector","input","textArea","window","addEventListener","localStorage","getItem","currentLocalData","currentLocalDataParse","JSON","parse","value","email","message","$parcel$interopDefault","formDataForLS","stringify","setItem","e","preventDefault","currentTarget","elements","removeItem"],"version":3,"file":"03-feedback.aeacc961.js.map"}